#!/usr/bin/env ruby

require 'csv'
require 'json'

def usage_and_exit
  puts "Usage: #{$0} <csv file>"
  puts ""
  puts "  Prints out a JSON render of the input CSV."
  exit 1
end

file = ARGV.shift
usage_and_exit if !file || !File.exist?(file)

content = CSV.table(file).map(&:to_hash)
puts JSON.generate(content, array_nl: "\n")
